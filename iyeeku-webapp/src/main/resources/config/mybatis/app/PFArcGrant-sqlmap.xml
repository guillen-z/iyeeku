<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.iyeeku.ext.grant.dao.PFArcGrantDao">

    <resultMap id="BaseResultMap" type="com.iyeeku.ext.grant.vo.PFArcGrantVO" >
        <id column="SQBZJ" property="sqbzj" jdbcType="CHAR" />
        <result column="SQDXBH" property="sqdxbh" jdbcType="VARCHAR" />
        <result column="SQZYBM" property="sqzybm" jdbcType="VARCHAR" />
        <result column="SQZYLX" property="sqzylx" jdbcType="CHAR" />
        <result column="QXYXDTDBH" property="qxyxdtdbh" jdbcType="VARCHAR" />
        <result column="QXSXSJ" property="qxsxsj" jdbcType="TIMESTAMP" />
        <result column="QXGQSJ" property="qxgqsj" jdbcType="TIMESTAMP" />
        <result column="CJR" property="cjr" jdbcType="CHAR" />
        <result column="CJSJ" property="cjsj" jdbcType="TIMESTAMP" />
        <result column="ZHXGR" property="zhxgr" jdbcType="CHAR" />
        <result column="ZHXGSJ" property="zhxgsj" jdbcType="TIMESTAMP" />
        <result column="JLZT" property="jlzt" jdbcType="CHAR" />
    </resultMap>

    <select id="findGrantBySqdxbh" parameterType="com.iyeeku.ext.grant.vo.PFArcGrantVO" resultMap="BaseResultMap">
        SELECT SQBZJ, SQDXBH, SQZYBM, SQZYLX, QXYXDTDBH, QXSXSJ, QXGQSJ, CJR, CJSJ, ZHXGR, ZHXGSJ, JLZT
        FROM PF_ARCGRANT WHERE SQDXBH = #{sqdxbh,jdbcType=VARCHAR} AND SQZYBM = #{sqzybm,jdbcType=VARCHAR}
        AND SQZYLX = #{sqzylx,jdbcType=CHAR} AND JLZT = '0'
    </select>

    <update id="updateMenuOrUrlRolePer" parameterType="com.iyeeku.ext.grant.vo.PFArcGrantVO">
        UPDATE PF_ARCGRANT SET JLZT = '1' WHERE SQDXBH = #{sqdxbh,jdbcType=VARCHAR} AND SQZYBM = #{sqzybm,jdbcType=VARCHAR}
        AND SQZYLX = #{sqzylx,jdbcType=CHAR} AND JLZT = '0'
    </update>

    <insert id="saveGrant" parameterType="com.iyeeku.ext.grant.vo.PFArcGrantVO">
      insert into PF_ARCGRANT (SQBZJ, SQDXBH, SQZYBM, SQZYLX, QXYXDTDBH, QXSXSJ,
      QXGQSJ, CJR, CJSJ, ZHXGR, ZHXGSJ, JLZT)
      values (#{sqbzj,jdbcType=CHAR}, #{sqdxbh,jdbcType=VARCHAR}, #{sqzybm,jdbcType=VARCHAR},
      #{sqzylx,jdbcType=CHAR}, #{qxyxdtdbh,jdbcType=VARCHAR}, #{qxsxsj,jdbcType=TIMESTAMP},
      #{qxgqsj,jdbcType=TIMESTAMP}, #{cjr,jdbcType=CHAR}, #{cjsj,jdbcType=TIMESTAMP},
      #{zhxgr,jdbcType=CHAR}, #{zhxgsj,jdbcType=TIMESTAMP}, #{jlzt,jdbcType=CHAR})
    </insert>

    <update id="updateGrant" parameterType="com.iyeeku.ext.grant.vo.PFArcGrantVO">
        UPDATE PF_ARCGRANT SET JLZT = '0' WHERE SQDXBH = #{sqdxbh,jdbcType=VARCHAR} AND SQZYBM = #{sqzybm,jdbcType=VARCHAR}
        AND SQZYLX = #{sqzylx,jdbcType=CHAR} AND JLZT = '1'
    </update>
	
</mapper>